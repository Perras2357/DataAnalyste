Durcissement de l'instance PostgreSQL

1) Objectifs : 
 
 Sécuriser l'instance postgreSQL 
 Contrôler l'accès réseau via postgresql.conf et pg_hba.conf 
 Chiffrement en transit avec SSL/TLS pour toutes les connexions 
 
 2) Configuration initiale et ligne de base de sécurité 
 
 
 Création d'un super user dédié : 
 
 
 Pour ne pas utiliser le compte postgres pour les opérations 
 -- connecter avec l’utilisateur postgres
CREATE ROLE admin_pg WITH LOGIN PASSWORD 'MotDePasseTrèsFort' SUPERUSER;
 
 
 
 
 
 NB: Ne jamais utiliser postgres pour les connexions applicatives 
 
 Politique de mots de passe :
 
 Activer password_encryption = scram-sha-256 dans postgresql.conf 
 
 
 
 
 
 Modifier le mode peer pour les connexions locales car l'utilisateur admin_pg n'est pas un utilisateur système mais postgresql.
Dans /etc/postgresql/17/main/pg_hba.conf remplacer : 
 
 local all all peer 
 
 par : 
 
 local all all scram-sha-256 
 
 Puis : 
 sudo systemctl reload postgresql
 
 
 
 NB : Pour se connecter avec son utilisateur il faut faire : 
 psql -U admin_pg -d postgres
 
 
 
 3) Controle d'accès réseau : 
 
 
 Limiter les interfaces réseau écoutées (postgresql.conf) : 
 listen_addresses = '127.0.0.1,10.0.0.0/24,XX.XX.XX.XX' # localhost + sous-réseau privé interne
port = 5432
ssl = on # nécessaire pour SSL/TLS
 
 
 
 Définir qui peut se connecter, par quel protocole et avec quelle méthode :
Se reférer à la documentation sur comment modifier le fichier pg_hba.conf

Suivant : [pointeur](C)